# To get started with Dependabot version updates, you'll need to specify which
# package ecosystems to update and where the package manifests are located.
# Please see the documentation for all configuration options:
# https://docs.github.com/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file

# .github/dependabot.yml

version: 2
updates:
  # ----------------------------------------------------
  # 更新 Gradle Version Catalog (libs.versions.toml)
  # ----------------------------------------------------
  - package-ecosystem: "gradle"
    # 对于不同的包管理器，directory: "/" 的含义不同
    # 对于 Gradle Version Catalog，`directory: "/"` 指的是仓库的根目录
    directory: "/" 
    schedule:
      interval: "weekly"
      time: "18:00"
      timezone: "Asia/Shanghai"
    # 排除 t8rin 目录下的所有模块
    exclude-paths:
      - "t8rin/**"
    open-pull-requests-limit: 10
    labels:
      - "dependency"
      - "gradle"
      - "version-catalog"
    automerge: true
    automerged_updates:
      # 所有 patch 自动合并
      - match:
          dependency_type: "all"
          update_type: "version-update:semver-patch"

      # 主流库的 minor 更新也自动合并
      - match:
          dependency_name: "androidx.*"
          update_type: "version-update:semver-minor"
      - match:
          dependency_name: "org.jetbrains.kotlin*"
          update_type: "version-update:semver-minor"
      - match:
          dependency_name: "org.jetbrains.kotlinx:kotlinx-coroutines-*"
          update_type: "version-update:semver-minor"
      - match:
          dependency_name: "io.coil-kt*"
          update_type: "version-update:semver-minor"
      - match:
          dependency_name: "com.google.android.material"
          update_type: "version-update:semver-minor"
      - match:
          dependency_name: "androidx.datastore*"
          update_type: "version-update:semver-minor"
      - match:
          dependency_name: "com.github.skydoves:colorpicker-compose"
          update_type: "version-update:semver-minor"

  # ----------------------------------------------------
  # 更新 Gradle Wrapper 版本 (gradle-wrapper.properties)
  # ----------------------------------------------------
  - package-ecosystem: "gradle"
    # 对于 Gradle Wrapper，`directory: "/gradle/wrapper"`
    # 指向仓库根目录下的 `gradle/wrapper`
    directory: "/gradle/wrapper"
    schedule:
      interval: "monthly"
      time: "18:00"
      timezone: "Asia/Shanghai"
    open-pull-requests-limit: 10
    labels:
      - "dependency"
      - "gradle-wrapper"
    automerge: true
    automerged_updates:
      - match:
          dependency_type: "all"
          update_type: "version-update:semver-patch"

  # ----------------------------------------------------
  # 更新 GitHub Actions
  # ----------------------------------------------------
  - package-ecosystem: "github-actions"
    # 对于 GitHub Actions，`directory: "/"` 是一个特例
    # 指的是 .github/workflows 目录（GitHub 约定）
    directory: "/"
    schedule:
      interval: "daily"
      time: "18:00"
      timezone: "Asia/Shanghai"
    open-pull-requests-limit: 10
    labels:
      - "dependency"
      - "github-actions"
